# python-api-challenge

## Module 6 Challenge

For this challenge, I leveraged the OpeanWeatherMap API and the Geoapify API to create visuals for a random set of over 500 cities around the world. The purpose of this challenge was for me to get more acclimated to making API calls and creating informative plots that analyze the data from those API calls, as well as be able to demonstrate an understanding of linear regression and correlations by describing noticable trends in those plots. 

### WeatherPy

The first part of this challenge, WeatherPy, used the citipy Python library to get a list of cities by latitude and longitude. The latitude/longitude values were created at random, and then was passed into a loop to call the citipy library for all 1500 pairs. The library would search for the closest city to those coordinates, and would append the city's name to a list if it is not already there; I ended with 591 cities. Next, I loop through each city in the list, and make a GET request to the OpenWeatherMap API to retrieve their coordinates, maximum temperatures, humidity and cloudiness percentages, wind speeds, and the date for when the call was made; with the code in a *try/except* condition to remove cities that were not found, the result was a DataFrame of 562 cities, which was then exported to a CSV file.

The next step was to create scatter plots for weather trends by the cities' latitude. Plots were made comparing the latitude of all the cities to the maximum temperature (C), humidity (%), cloudiness (%), and wind speed (m/s). Each plot was customized per the requirements and exported as a PNG file.

The last step of this part of the challenge was to compute linear regression for relationships between the aformentioned plots, but now separated by Northern and Southern Hemispheres. I started with defining a function that will calculate the linear regression for each relationship when passing the DataFrame as a parameter. This was done to ensure an easier process and reduce the lines of code needed. Next, the DataFrame was split into two for each Hemisphere, and then the plots were constructed for North and South. The linear regression was calculated for each plot, resulting in 8 total scatter plots. Finally, I analyzed the plots and discussed trends and relationships in the plots. Below are my findings:

#### Temperature vs. Latitude

**Discussion about the linear relationship:** When comparing the cities' latitude to their maximimum temperatures, a clear, strong relationship can be seen. For the cities in the Northern Hemisphere, a negative correlation with a coefficient of about -0.9 is depicted in the plot. By contrast, there is a positive correlation between cities in the Southern Hemisphere and their maximum temperatures, with a coefficient of about 0.7. These two relationships are consistent with the idea that as cities move away from the equator, their temperatures decrease. Cities in these Polar areas tend to experience freezing climates and snowy conditions and see minimal sunlight during the winter seasons. Another noticable trend is that cities at and around the equator are have generally the highest maximum temperatures of the dataset, with some cities experiencing 30-40 degrees Celsius. These cities have more tropical climates and get the most consistent weather year-round, as sunlight is consistent during all seasons along the equator.

#### Humidity vs. Latitude

**Discussion about the linear relationship:** For the relationship between the cities' latitude and the humidity percentage, there is similarities in both hemispheres. For the Northern Hemisphere, there is a weak, positive correlation between the latitude and humidity, with a coefficient of about 0.16. Also, there is a weak, positive correlation found in the Southern Hemisphere, with a coefficient of about 0.27. Despite the positive coefficient found in the two plots seemingly indicating a relationship, it is difficult to make this conclusion. Most cities in the Northern Hemisphere have at least 60 percent humidity. However, they are much more spread out between 10 and 50 degrees latitude. As most major cities in the world can be found in this range, this could be an indication as to why the relationship between latitude and humidity is a weak one. Tropical and desert climates near the equator can also affect the relationship, as they can both demonstrate extreme humidity in both directions despite being near the same latitude.

#### Cloudiness vs. Latitude

**Discussion about the linear relationship:** The relationship between a city's latitude and the percentage of cloudy conditions appears to be a weak one at best. In the Southern Hemisphere, there is a correlation coefficient of about 0.17, indicating a very weak, positive relationship. Meanwhile, the Northern Hemisphere's correlation coefficient is about 0.12, denoting an even weaker positive relationship. Looking at the Northern Hemisphere's plot, there are a lot of cities at or near 100% cloudiness. However, there is another noticable cluster between 20 and 50 degrees where many cities are at or near 0%. As many American and European cities fall within this latitude range and accounts for a large amount of the world's cities, this is a possible factor in why there is weak to no correlation. The Southern Hemisphere has a slightly stronger relationship in this study due to the number of cities in negative latitudes being fewer than the number of cities in positive latitudes, so there is a smaller chance for variation. Despite this, it is reasonable to conclude that there is not a strong enough relationship between latitude and percentage of cloudiness in either hemisphere to denote a meaningful correlation.

#### Wind Speed vs. Latitude

**Discussion about the linear relationship:** In the Southern Hemisphere, there is a negative correlation between a city's latitude and their wind speeds, with a coefficient of about -0.37. This would indicate slower wind speeds as cities get near the equator. The prevalence of coastal cities at lower latitudes could be an indicator of the higher wind speeds observed, which decreases as more cities in land-bound areas are observed in the study. On the other hand, the Northern Hemisphere cities' latitude appears to have no correlation with wind speeds, with a coefficient of about 0.09. When looking at the plot, a majority of the cities in the Northern Hemisphere appear to have wind speeds of around 2 to 4 meters per second. As stated before, a large percentage of the world's cities are found in the Northern Hemisphere, where there is a large variety of coastal and land-bound regions that can have many different types of weather conditions. Such variety can be an indicator as to why there is no relationship between wind speeds and latitudes above the equator.

### VacationPy

The second part of this challenge, VacationPy, used the geoViews Python library and the Geoapify API to show a map plot of the cities from the first part of the challenge. The objective was to plan future vacations by specifying cities with ideal weather conditions, and finding the nearest hotel to them. The first step was to show the plot of all the cities from the DataFrame with a map plot. This was created with *hvplot*, an module in Python that makes interactive plots. By passing the x- and y-axis as the longitude and latitude of the cities, and defining other parameters, I created a visual of the world map with markers for the cities. The size of each marker was determined by the humidity percentage of each city.

The following step was to narrow the scope of the DataFrame to cities with ideal weather conditions. I created a DataFrame based on the orignal one that only included cities with a maximum temperature between 19 and 30 degrees Celsius, a wind speed of less than 10 meters per second, humidity of less than 50 percent, and cloudiness percentage greater than 0. After dropping rows with null values, I ended up with a DataFrame of 18 cities. I further narrowed the columns by creating a copy of the DataFrame with only the specified columns and adding a new column for the hotel names.

Next was to iterate through each row in the DataFrame and making a GET request to the Geoapify API. This was done to find the first nearest hotel within a 10,000 meter radius of the latitude and longitude of the city. With the use of a *try/except* condition, cities that did not have a hotel within this radius were able to be skipped. The hotel names were appended to the DataFrame, resulting in 9 cities with hotels. Finally, I created a map plot with the new DataFrame, this time including more context when hovering over each city's marker (country and hotel name).
